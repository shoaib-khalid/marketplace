<div class="flex flex-col items-center bg-card w-full h-full">
    <!-- Header -->
    <div class="w-full">
        <div class="relative flex py-8 px-4 sm:p-16 overflow-hidden bg-white h-52 sm:h-70 lg:h-75 justify-center items-center">
            <!-- Background -->
            <div class="absolute inset-0 pointer-events-none">
                <img [src]="location.imageUrl ? location.imageUrl : platform.logo" alt="">
            </div>
            <!-- Black filter  -->
            <div class="absolute inset-0 pointer-events-none bg-black opacity-70"></div>
            <!-- Back button  -->
            <div class="absolute top-0 left-0 text-white cursor-pointer p-4 flex flex-row gap-x-1" (click)="backClicked()">
                <mat-icon
                    class="icon-size-5 text-white"
                    [svgIcon]="'heroicons_outline:chevron-left'"></mat-icon>
                <span class="pr-2">Back</span>
            </div>
            <!-- Text  -->
            <div class="z-10 relative flex flex-col items-center tracking-wide">
                <h2 class="text-xl text-white sm:text-2xl">{{location.cityDetails.name}}</h2>
                <h2 *ngIf="categoryId" class="text-lg text-white sm:text-xl">{{category.parentName}}</h2>
                <div class="border-t w-40 border-white"></div>
                <div class="max-w-2xl mt-2 sm:text-xl text-center text-secondary text-white">
                    50 products
                </div>
            </div>
        </div>
    </div>
    <!-- Content  -->
    <div class="flex flex-col items-center bg-card w-full p-2 sm:p-4 h-full">
        <!-- Locations -->
        <!-- <div class="flex flex-col pt-8">
            <div class="flex flex-row w-full items-center justify-between">
                <span class="font-semibold text-xl">Locations</span>
                <span [routerLink]="'/locations'" class="font-semibold cursor-pointer text-primary hover:text-primary-600">View All</span>
            </div>
            <div class="flex flex-nowrap items-center justify-between overflow-x-auto">
                <ng-container *ngFor="let location of locations">
                    <div class="flex-wrap items-center p-1" [routerLink]="['/location/' + location.locationId]">
                        <fuse-card class="flex flex-col rounded-lg min-w-30 h-30 w-full filter-article cursor-pointer">
                            <img
                                class="object-cover h-40"
                                [src]="location.scene">
                            <div class="m-1 text-sm text-center font-semibold">{{location.capitalCity}}</div>
                        </fuse-card>
                    </div>
                </ng-container>
            </div>
        </div> -->
        <!-- Categories -->
        <div class="flex flex-col w-full">
            <div class="flex flex-row w-full items-center justify-between">
                <span class="font-semibold text-xl">Categories</span>
                <span [routerLink]="'/category/'" class="font-semibold text-primary cursor-pointer hover:text-primary-600">View All</span>
            </div>
            <div class="grid grid-cols-4 gap-1 items-start w-full justify-between mt-2">
                <ng-container *ngFor="let category of categories">
                    <div class="grid col-span-1 w-full justify-center">
                        <div class="flex flex-col w-full items-center cursor-pointer group" 
                            [routerLink]="['/location/' + locationId + '/' + category.parentId]">
                            <img
                                class="w-20 h-20 object-contain group-hover:border-2 items-start justify-start bg-stone-200 rounded-full p-2"
                                [src]="category.parentThumbnailUrl ? category.parentThumbnailUrl : platform.logo">
                            <span class="w-full text-center group-hover:text-primary mt-2 font-semibold">{{category.parentName}}</span>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>

        <!-- Trending Products -->
        <div class="flex flex-col w-full mt-4">
            <div class="flex flex-row w-full items-center justify-between">
                <span class="font-semibold text-xl">Trending Products</span>
                <!-- <span [routerLink]="'/locations'" class="font-semibold cursor-pointer text-primary hover:text-primary-600">View All</span> -->
            </div>
            <div class="flex flex-nowrap items-center justify-between overflow-x-auto">
                <ng-container *ngFor="let product of products">
                    <div class="flex-wrap items-center p-1">
                        <fuse-card class="flex flex-col rounded-lg min-w-[10rem] sm:min-w-60 h-50 w-full filter-article cursor-pointer"
                        (click)="redirectToProduct(product.seoUrl)">
                            <img
                                class="object-cover h-30"
                                [src]="product.thumbnailUrl">
                            <div class="flex flex-col mx-2 mt-1">
                                <span class="m-0.5 font-semibold line-clamp-1">{{product.name}}</span>
                                <span class="m-0.5 text-gray-400 line-clamp-1">{{product.storeDetails.name}}</span>
                                <div class="flex flex-row justify-between">
                                    <span class="line-through text-sm font-semibold">RM 19.44</span>
                                    <span class="font-semibold">{{product.productInventories[0].price | currency: currencySymbol}}</span>
                                </div>
                            </div>
                        </fuse-card>
                    </div>
                </ng-container>
            </div>
        </div>
        <!-- Featured store -->
        <div class="flex flex-col w-full mt-4">
            <div class="flex flex-row items-center justify-between w-full mt-4">
                <span class="font-semibold text-xl">Featured Stores</span>
                <span [routerLink]="'/store/'" class="font-semibold text-primary cursor-pointer hover:text-primary-600">View All</span>
            </div>
            <div class="grid md:grid-cols-3 grid-cols-6 gap-2 items-center w-full justify-between mt-2">
                <ng-container *ngFor="let store of stores">
                    <div class="grid col-span-3 sm:col-span-2 md:col-span-1 w-full items-start justify-center group">
                        <fuse-card
                            (click)="chooseStore(store.storeDetails.domain)" 
                            class="flex flex-col rounded-lg border border-gray-300 h-60 w-44 mb-1 cursor-pointer filter-article">
                            <img
                                class="object-cover h-26"
                                [src]="store.storeDetails.storeAsset ? store.storeDetails.storeAsset.logoUrl : platform.logo">
                            <div class="flex flex-col m-2 font-semibold">
                                <span class="group-hover:text-primary text-lg line-clamp-1">{{store.storeDetails.name}}</span>
                                <span class="group-hover:text-primary font-medium">{{store.storeDetails.state}}</span>
                                <p class="flex flex-row text-black font-normal text-sm line-clamp-3 mt-1" [innerHTML]="store.storeDetails.storeDescription"></p>
                            </div>
                        </fuse-card>
                    </div>
                </ng-container>
            </div>
        </div>
        <!-- Stores -->
        <!-- <div class="flex flex-col w-full mt-4">
            <div class="grid md:grid-cols-3 grid-cols-6 gap-2 items-center w-full justify-between">
                <ng-container *ngFor="let store of stores">
                    <div class="grid col-span-3 sm:col-span-2 md:col-span-1 w-full items-start justify-center group">
                        <fuse-card
                            (click)="chooseStore(store.domain)" 
                            class="flex flex-col rounded-lg border border-gray-300 h-60 w-44 mb-1 cursor-pointer filter-article">
                            <img
                                class="object-cover h-26"
                                [src]="displayStoreLogo(store.storeAssets)">
                            <div class="flex flex-col m-2 font-semibold">
                                <span class="group-hover:text-primary  text-lg">{{store.name}}</span>
                                <p class="flex flex-row text-black text-xs" [innerHTML]="store.storeDescription"></p>
                            </div>
                        </fuse-card>
                    </div>
                </ng-container>
            </div>
        </div> -->
    </div>
</div>
