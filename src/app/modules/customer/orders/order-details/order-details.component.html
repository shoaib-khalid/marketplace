<!-- Order Details -->
<div class="relative flex flex-col items-center bg-card w-full h-full">
    <!-- Main menu -->
    <div class="flex flex-col items-center w-full h-auto my-5 px-3 sm:px-5">
        <!-- Container -->
        <div class="flex flex-col md:flex-row justify-between mt-4 w-full">
            <!-- Order Details -->
            <div class="flex flex-col w-full">
                <ng-container *ngIf="orderDetails">
                    <div class="flex flex-col w-full border border-gray-300 rounded-lg py-2 sm:py-4 px-4 mb-4">
                        <!-- Header -->
                        <div class="flex flex-row justify-between items-center pb-2 sm:pb-4">
                            <h3 class="font-semibold text-lg items-center">Order ID : {{orderDetails.invoiceId}}</h3>
                            <button class="flex flex-row justify-center w-34 border border-primary p-2 rounded items-center">
                                <!-- Progress Status Icon -->
                                <mat-icon 
                                    [class]="displayStatus(orderDetails.completionStatus).class" 
                                    [svgIcon]="displayStatus(orderDetails.completionStatus).icon">
                                </mat-icon>

                                <!-- Progress Status -->
                                <span 
                                    class="font-semibold items-center pl-2">{{displayStatus(orderDetails.completionStatus).label}}
                                </span>
                            </button> 
                        </div>

                        <!-- Border -->
                        <div class="border-t w-full"></div>

                        <!-- Details -->
                        <div class="flex flex-col my-3 w-full py-4">
                            <div class="flex flex-row">
                                <mat-icon class="text-primary" svgIcon="mat_solid:storefront"></mat-icon>
                                <div class="flex flex-col pl-2">
                                    <h3 class="font-bold text-xl cursor-pointer" (click)="redirect('https://' + orderDetails.store.domain + '/home')">{{orderDetails.store.name}}</h3>
                                    <h3 class="font-medium text-gray-400 text-md">Order Placed : {{dateCreated | date:'MMM dd yyyy, h:mm a' }}</h3>
                                </div>
                            </div>
                            <div class="flex flex-row pt-4">
                                <mat-icon class="text-primary" svgIcon="mat_outline:location_on"></mat-icon>
                                <div class="flex flex-col pl-2">
                                    <h3 class="font-semibold text-primary text-lg">Delivery Address</h3>
                                    <h3 class="font-medium pt-2 text-md">Name : {{orderDetails.orderShipmentDetail.receiverName}}</h3>
                                    <h3 class="font-medium pt-2 text-md">Contact : {{orderDetails.orderShipmentDetail.phoneNumber}}</h3>
                                    <h3 class="font-medium pt-2 text-md">Address : {{orderDetails.orderShipmentDetail.address}}, {{orderDetails.orderShipmentDetail.zipcode}}, {{orderDetails.orderShipmentDetail.city}}, {{orderDetails.orderShipmentDetail.state}}</h3>
                                </div>
                            </div>
                            <div class="flex flex-row pt-4">
                                <svg class="h-6 w-6 text-primary" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" 
                                    stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" 
                                    d="M0 0h24v24H0z"/>  <circle cx="7" cy="17" r="2" />  <circle cx="17" cy="17" r="2" />  <path 
                                    d="M5 17h-2v-4m-1 -8h11v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5" />  <line x1="3" y1="9" x2="7" y2="9" /></svg>
                                <div class="flex flex-col pl-2">
                                    <h3 class="font-semibold text-primary text-lg">Delivery Option</h3>
                                    <h3 class="font-medium pt-2 text-md">{{orderDetails.orderShipmentDetail.deliveryPeriodDetails?orderDetails.orderShipmentDetail.deliveryPeriodDetails.id:'-'}}</h3>
                                </div>
                            </div>
                            <!-- <div class="flex flex-row pt-4">
                                <svg class="h-6 w-6 text-primary"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" 
                                    stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">  <path stroke="none" 
                                    d="M0 0h24v24H0z"/>  <circle cx="7" cy="17" r="2" />  <circle cx="17" cy="17" r="2" />  <path 
                                    d="M5 17h-2v-11a1 1 0 0 1 1 -1h9v6h-5l2 2m0 -4l-2 2" />  <path d="M9 17h6" />  <path d="M13 6h5l3 5v6h-2" /></svg>
                                <div class="flex flex-col pl-2">
                                    <h3 class="font-semibold text-primary text-lg">Tracking Number</h3>
                                    <h3 class="font-medium pt-2 text-md">{{orderDetails.orderShipmentDetail.trackingNumber}}</h3>
                                </div>
                            </div> -->
                            
                            <!-- <div class="mt-2 pl-6 mb-4">
                                <ol>
                                    <ng-container *ngFor="let activity of activities; let i = index; let first = first; let last = last; trackBy: trackByFn">
        
                                        <li class="relative flex py-7">
                                            <ng-container *ngIf="true">
                                                <div class="absolute top-7 left-5 w-0.5 h-full -ml-px bg-gray-500"></div>
                                            </ng-container>
        
                                            <div class="relative flex flex-auto">
                                                <ng-container *ngIf="true">
                                                    <div class="flex flex-shrink-0 items-center justify-center w-7 h-7 ml-1.5 mr-4 rounded-full bg-green-500">
                                                        <mat-icon
                                                            class="icon-size-5 text-white"
                                                            [svgIcon]="'heroicons_solid:badge-check'">
                                                        </mat-icon>
                                                    </div>
                                                </ng-container>
        
                                                <div class="flex flex-col flex-auto items-start">
                                                    <div class="text-secondary">
                                                        {{orderDetails.created | date:'MMM dd yyy, h:mm a'}}
                                                    </div>
                                                    <span class="font-semibold pt-2">Order created from store {{orderDetails.store.name}}</span>
                                                </div>
                                            </div>
                                        </li>

                                        <li class="relative flex py-7">
                                            <ng-container *ngIf="true">
                                                <div class="absolute top-7 left-5 w-0.5 h-full -ml-px bg-gray-500"></div>
                                            </ng-container>
        
                                            <div class="relative flex flex-auto">
                                                <ng-container *ngIf="true">
                                                    <div class="flex flex-shrink-0 items-center justify-center w-7 h-7 ml-1.5 mr-4 rounded-full bg-green-500">
                                                        <mat-icon
                                                            class="icon-size-5 text-white"
                                                            [svgIcon]="'heroicons_solid:badge-check'">
                                                        </mat-icon>
                                                    </div>
                                                </ng-container>
        
                                                <div class="flex flex-col flex-auto items-start">
                                                    <div class="text-secondary">
                                                        {{orderDetails.created | date:'MMM dd yyy, h:mm a'}}
                                                    </div>
                                                    <ng-container *ngIf="true">
                                                        <div
                                                            class="mt-4 py-4 px-5 rounded-lg bg-gray-200 dark:bg-gray-800"
                                                            >Order Created from {{orderDetails.store.name}}</div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </li>
                                    </ng-container>
                                </ol>
                            </div> -->
                        </div>

                        <!-- Border -->
                        <div class="border-t w-full"></div>

                        <!-- Items -->
                        <div class="flex flex-col my-3 items-center justify-between w-full pt-2">
                            <ng-container *ngFor="let orderItem of orderDetails.orderItemWithDetails">
                                <div class="flex flex-row justify-between w-full py-2 gap-2">
                                    <div class="w-full">
                                        <div class="relative flex flex-0 items-center justify-center w-16 h-16 mr-4 rounded overflow-hidden border">
                                            <img
                                                class="w-32"
                                                [alt]="'Product thumbnail image of ' + orderItem.productName"
                                                [src]=
                                                    "orderItem.itemAssetDetails ? orderItem.itemAssetDetails.url 
                                                    : orderItem.productInventory.product.thumbnailUrl ? orderItem.productInventory.product.thumbnailUrl 
                                                    : orderDetails.store.storeLogoUrl ? orderDetails.store.storeLogoUrl
                                                    : 'assets/branding/deliverin/logo/DeliverIN-Original.jpg'">
                                            <div
                                                class="flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="w-full">
                                        <h3 class="font-bold">{{orderItem.productName}}</h3>
                                        <h3 class="text-gray-400">{{orderItem.productVariant}}</h3>
                                    </div>
                                    <div class="items-center justify-center">
                                        <h3 class="text-gray-400">x{{orderItem.quantity}}</h3>
                                    </div>
                                    <div class="items-end w-full flex flex-col">
                                        <!-- <h3 style="text-decoration: line-through;" class="font-bold">19.44</h3> -->
                                        <h3 class="font-bold text-primary">{{orderItem.price | currency: orderDetails.store.regionCountry.currencySymbol}}</h3>
                                    </div>
                                </div>
                            </ng-container>
                        </div>

                        <!-- Border -->
                        <div class="border-t w-full"></div>

                        <!-- Footer -->
                        <div class="flex flex-col pt-2 gap-1">
                            <!-- Sub Total -->
                            <div class="flex flex-row justify-between w-full">
                                <h3 class="font-semibold text-gray-500">Sub Total</h3>
                                <p class="items-center font-semibold text-gray-400">{{orderDetails.subTotal | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                            </div>
                            <!-- Order Discount -->
                            <ng-container *ngIf="orderDetails.appliedDiscount !== 0">
                                <div class="flex flex-row justify-between w-full">
                                    <p class="font-semibold text-gray-500">
                                        <span>Order Discount</span>
                                        <span *ngIf="orderDetails.appliedDiscountDescription">&nbsp;({{orderDetails.appliedDiscountDescription}})</span>
                                        <span class="text-xs text-gray-500" *ngIf="orderDetails.discountMaxAmount && orderDetails.discountMaxAmount != 0 && orderDetails.appliedDiscount >= orderDetails.discountMaxAmount && orderDetails.appliedDiscount != 0">
                                            Capped at {{orderDetails.discountMaxAmount | currency: orderDetails.store.regionCountry.currencySymbol }}
                                        </span>
                                    </p>
                                    <p class="items-center font-semibold text-gray-400">-{{orderDetails.appliedDiscount | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                                </div>
                            </ng-container>
                            <!-- Service Charges -->
                            <ng-container *ngIf="orderDetails.store.serviceChargesPercentage !== 0">
                                <div class="flex flex-row justify-between w-full">
                                    <h3 class="font-semibold text-gray-500">Service Charges ({{orderDetails.store.serviceChargesPercentage | number}}%)</h3>
                                    <p class="items-center font-semibold text-gray-400">{{orderDetails.storeServiceCharges | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                                </div>
                            </ng-container>
                            <!-- Delivery Charges -->
                            <div class="flex flex-row justify-between w-full">
                                <h3 class="font-semibold text-gray-500 ">Delivery Charges</h3>
                                <p class="items-center font-semibold text-gray-400">{{orderDetails.deliveryCharges | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                            </div>
                            <!-- Delivery Discount -->
                            <ng-container *ngIf="orderDetails.deliveryDiscount !== 0">
                                <div class="flex flex-row justify-between w-full">
                                    <p class="font-semibold text-gray-500">
                                        <span>Delivery Discount</span>
                                        <span *ngIf="orderDetails.deliveryDiscountDescription">&nbsp;({{orderDetails.deliveryDiscountDescription}})</span>
                                        <span class="text-xs text-gray-500" *ngIf="orderDetails.deliveryDiscountMaxAmount != 0 && orderDetails.deliveryDiscount >= orderDetails.deliveryDiscountMaxAmount && orderDetails.deliveryDiscount != 0">
                                            Capped at {{orderDetails.deliveryDiscountMaxAmount | currency: orderDetails.store.regionCountry.currencySymbol }}
                                        </span>
                                    </p>
                                    <p class="items-center font-semibold text-gray-400">-{{orderDetails.deliveryDiscount | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                                </div>
                            </ng-container>
                            <!-- Voucher Discount -->
                            <ng-container *ngIf="orderDetails.voucherDiscount !== 0 && orderDetails.voucherDiscount !== null">
                                <div class="flex flex-row justify-between w-full">
                                    <p class="font-semibold text-gray-500">
                                        <span>Voucher Discount</span>
                                    </p>
                                    <p class="items-center font-semibold text-gray-400">-{{orderDetails.voucherDiscount | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                                </div>
                            </ng-container>
                            <!-- Total Amount -->
                            <div class="flex flex-row justify-between w-full">
                                <h3 class="font-bold">Total Amount</h3>
                                <p class="items-center font-semibold">Total Order ({{orderDetails.orderItemWithDetails.length}}): {{orderDetails.total | currency: orderDetails.store.regionCountry.currencySymbol}}</p> 
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
    </div>
</div>